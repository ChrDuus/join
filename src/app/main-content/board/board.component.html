<main class="main-container">
  <header class="header">
    <h1 class="title">Board</h1>

    <div class="right-section">
      <div class="search-input-wrapper" [class.active-wrapper]="isActive">
        <input
          type="text"
          placeholder="Find Task"
          class="search-input"
          [(ngModel)]="searchQuery"
          (input)="onInputChange($event)"
        />
        <span class="separator">|</span>
        <button class="search-button" (click)="toggleActive()">
          <img src="assets/img/board/search.svg" alt="Search" />
        </button>
      </div>

      <button
      (click)="overlayService.openOverlay('add-task')"
        class="add-task-button create-button"
      >Add task<img
          src="assets/img/board/plus.svg"
          alt="Add Task"
        />
      </button>
    </div>
  </header>

  <div class="columns-container">
    <div class="columns-content">
      
      <div class="column">
        <div class="column-header">
          <div class="column-title">
            <span>To Do</span>
            <button class="add-button">
              <img src="assets/img/board/plus.svg" alt="Add" />
            </button>
          </div>
        </div>
        <div class="tasks-container">

          <div *ngIf="tasks.length > 0">
            <div *ngFor="let task of tasks" class="task-card">
              <div class="task-category">{{ task.category }}</div>
              <div class="task-title">{{ task.title }}</div>
              <div class="task-description">{{ task.description ? (task.description.length > 50 ? task.description.substring(0, 50) + '...' : task.description) : '' }}</div>
              
              <div class="task-progress" *ngIf="task.subtasks && task.subtasks.length > 0">
                {{ task.subtasks.length }} Subtasks
              </div>
              
              <div class="task-footer">
                <div class="task-assigned">
                  <div *ngFor="let assignee of task.assignedTo" 
                      class="assigned-contact"
                      [ngStyle]="{ background: assignee.color }">
                    {{ assignee.letters }}
                  </div>
                </div>
                <div class="task-priority">
                  <img *ngIf="task.priority === 'Urgent'" src="assets/img/2-add-task/urgent-icon.svg" alt="urgent" />
                  <img *ngIf="task.priority === 'Medium'" src="assets/img/2-add-task/medium-icon.svg" alt="medium" />
                  <img *ngIf="task.priority === 'Low'" src="assets/img/2-add-task/low-icon.svg" alt="low" />
                </div>
              </div>
            </div>
          </div>
          
          <div class="dashed-container" *ngIf="tasks.length === 0">
            <span>No tasks To do</span>
          </div>
        </div>
      </div>


      <div class="column">
        <div class="column-header">
          <div class="column-title">
            <span>In Progress</span>
            <button class="add-button">
              <img src="assets/img/board/plus.svg" alt="Add" />
            </button>
          </div>
        </div>
        <div class="tasks-container">
        </div>
      </div>

    
      <div class="column">
        <div class="column-header">
          <div class="column-title">
            <span>Await Feedback</span>
            <button class="add-button">
              <img src="assets/img/board/plus.svg" alt="Add" />
            </button>
          </div>
        </div>
        <div class="tasks-container">
        </div>
      </div>

      <div class="column">
        <div class="column-header">
          <div class="column-title">
            <span>Done</span>
          </div>
        </div>
        <div class="tasks-container">
        </div>
      </div>
    </div>
  </div>
</main>